machine:
    java:
        version: oraclejdk8
    timezone:
        Asia/Tokyo

    environment:
        GRADLE_OPTS: -Dorg.gradle.daemon=true

dependencies:
    post:
        - ./gradlew --console=plain testClasses war

test:
    override:
        - ./gradlew --console=plain build
    post:
        - mkdir -p $CIRCLE_TEST_REPORTS/junit/
        - find . -type f -regex ".*/build/test-results/.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit/ \;

general:
    artifacts:
        - "build/libs"
